import{S as me,i as pe,s as de,w as j,x as Q,y as X,f as Z,t as ee,z as te,o as $e,k as F,l as k,m as L,h as d,n as K,b as U,B as _e,I as oe,J as ie,q as R,a as H,r as D,c as J,G as p,K as ve,u as le,L as ue}from"../../../chunks/index-2162bef6.js";import{B as ge}from"../../../chunks/BlankLink-275cdf8b.js";import{M as be,S as Ee,T as we}from"../../../chunks/Main-24fc2ca5.js";import{S as Ae}from"../../../chunks/Seo-865e1a2e.js";import{D as Re}from"../../../chunks/DemoContainer-698f1404.js";import{N as fe}from"../../../chunks/NumberRange-bdb9d155.js";import{r as re}from"../../../chunks/math-4278f00e.js";import{c as ce,a as De}from"../../../chunks/gl-a52fa1b4.js";import{d as Se}from"../../../chunks/core-ddcb889b.js";function Te(m){let t;return{c(){t=F("canvas"),this.h()},l(o){t=k(o,"CANVAS",{slot:!0,class:!0}),L(t).forEach(d),this.h()},h(){K(t,"slot","canvas"),K(t,"class","svelte-1sfotsa")},m(o,e){U(o,t,e),m[7](t)},p:_e,d(o){o&&d(t),m[7](null)}}}function qe(m){let t,o,e,n,s,v,b,h,S,$,E,w,G,C,V,M,A,x,P,O,B,I,T,l,_;function z(r){m[5](r)}let W={id:"depth",min:Le,max:Ce,step:1,onChange:m[4]};m[1]!==void 0&&(W.value=m[1]),h=new fe({props:W}),oe.push(()=>ie(h,"value",z));function ne(r){m[6](r)}let a={id:"variation",min:ye,max:Be,step:1,onChange:m[4]};return m[2]!==void 0&&(a.value=m[2]),A=new fe({props:a}),oe.push(()=>ie(A,"value",ne)),{c(){t=F("fieldset"),o=F("div"),e=F("label"),n=R("Depth: ("),s=R(m[1]),v=R(")"),b=H(),j(h.$$.fragment),$=H(),E=F("div"),w=F("label"),G=R("Variation: ("),C=R(m[2]),V=R(")"),M=H(),j(A.$$.fragment),P=H(),O=F("div"),B=F("button"),I=R("Run"),this.h()},l(r){t=k(r,"FIELDSET",{slot:!0});var c=L(t);o=k(c,"DIV",{class:!0});var y=L(o);e=k(y,"LABEL",{for:!0});var f=L(e);n=D(f,"Depth: ("),s=D(f,m[1]),v=D(f,")"),f.forEach(d),b=J(y),Q(h.$$.fragment,y),y.forEach(d),$=J(c),E=k(c,"DIV",{class:!0});var u=L(E);w=k(u,"LABEL",{for:!0});var i=L(w);G=D(i,"Variation: ("),C=D(i,m[2]),V=D(i,")"),i.forEach(d),M=J(u),Q(A.$$.fragment,u),u.forEach(d),P=J(c),O=k(c,"DIV",{class:!0});var g=L(O);B=k(g,"BUTTON",{});var Y=L(B);I=D(Y,"Run"),Y.forEach(d),g.forEach(d),c.forEach(d),this.h()},h(){K(e,"for","depth"),K(o,"class","demo-input-group"),K(w,"for","variation"),K(E,"class","demo-input-group"),K(O,"class","demo-input-group run svelte-1sfotsa"),K(t,"slot","controls")},m(r,c){U(r,t,c),p(t,o),p(o,e),p(e,n),p(e,s),p(e,v),p(o,b),X(h,o,null),p(t,$),p(t,E),p(E,w),p(w,G),p(w,C),p(w,V),p(E,M),X(A,E,null),p(t,P),p(t,O),p(O,B),p(B,I),T=!0,l||(_=ve(B,"click",m[3]),l=!0)},p(r,c){(!T||c&2)&&le(s,r[1]);const y={};!S&&c&2&&(S=!0,y.value=r[1],ue(()=>S=!1)),h.$set(y),(!T||c&4)&&le(C,r[2]);const f={};!x&&c&4&&(x=!0,f.value=r[2],ue(()=>x=!1)),A.$set(f)},i(r){T||(Z(h.$$.fragment,r),Z(A.$$.fragment,r),T=!0)},o(r){ee(h.$$.fragment,r),ee(A.$$.fragment,r),T=!1},d(r){r&&d(t),te(h),te(A),l=!1,_()}}}function Fe(m){let t,o;return t=new Re({props:{caption:"Diamond Square",$$slots:{controls:[qe],canvas:[Te]},$$scope:{ctx:m}}}),{c(){j(t.$$.fragment)},l(e){Q(t.$$.fragment,e)},m(e,n){X(t,e,n),o=!0},p(e,[n]){const s={};n&67108871&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){o||(Z(t.$$.fragment,e),o=!0)},o(e){ee(t.$$.fragment,e),o=!1},d(e){te(t,e)}}}const ke=.5,Le=1,Ce=10,ye=1,Be=256;function Ie(m,t,o){let e,n,s=0,v=0,b=1,h=8,S=128,$,E=-1,w=-1,G,C,V,M,A;const x=Float32Array.BYTES_PER_ELEMENT,P=`#version 300 es
	in vec2 position;
	in float color;

	out float vColor;
	void main() {
		vColor = color;
		gl_Position = vec4(position, 0.0, 1.0);
	}
	`,O=`#version 300 es
	precision highp float;

	in float vColor;

	out vec4 outColor;
	void main() {
		outColor = vec4(vec3(vColor), 1.0);
	}
	`;$e(()=>{if(n=e.getContext("webgl2"),!n)return;function a(){b=Math.min(window.devicePixelRatio,2),e.clientWidth*b!==s&&(s=e.clientWidth,v=Math.floor(s*ke),o(0,e.style.width=s+"px",e),o(0,e.style.height=v+"px",e),s*=b,v*=b,o(0,e.width=s,e),o(0,e.height=v,e))}return window.addEventListener("resize",a,{passive:!0}),a(),B(),T(),()=>{window.removeEventListener("resize",a)}});function B(){const a=ce(n,n.VERTEX_SHADER,P),r=ce(n,n.FRAGMENT_SHADER,O);M=De(n,{vert:a,frag:r}),E=n.getAttribLocation(M,"position"),w=n.getAttribLocation(M,"color"),G=n.createVertexArray(),C=n.createBuffer(),V=n.createBuffer()}function I(){const a=[];let r=2**h;$=r+1;let c=S;for(let f=0;f<$;f++){const u=[];for(let i=0;i<$;i++)u.push(0);a.push(u)}const y=re(0,255);for(a[0][0]=y,a[0][r]=y,a[r][0]=y,a[r][r]=y;r>1;){const f=r/2;for(let u=0;u<$-1;u+=r)for(let i=0;i<$-1;i+=r){let g=a[u][i]+a[u][i+r]+a[u+r][i]+a[u+r][i+r];g/=4,g+=re(-c,c),a[u+f][i+f]=g}for(let u=0;u<$-1;u+=r)for(let i=0;i<$-1;i+=r){let g=a[u+f][i+f]+a[u][i]+a[u][i+r];u===0?g+=a[$-1][i+f]:g+=a[u+f][i+f],g/=4,g+=re(-c,c),a[u][i+f]=g;let Y=a[u+f][i+f]+a[u][i+r]+a[u+r][i+r];i+r===$-1?Y+=a[u+f][i]:Y+=a[u+f][i+r+f],Y/=4,Y+=re(-c,c),a[u+f][i+r]=Y;let q=a[u+f][i+f]+a[u+r][i+r]+a[u+r][i];u+r===$-1?q+=a[u][i+f]:q+=a[u+r+f][i+f],q/=4,q+=re(-c,c),a[u+r][i+f]=q;let N=a[u+f][i+f]+a[u][i]+a[u+r][i];i===0?N+=a[u+f][$-1]:N+=a[u+f][i-f],N/=4,N+=re(-c,c),a[u+f][i]=N}r/=2,c=Math.max(c/2,1)}return a}function T(){const a=I(),r=[],c=2**h;for(let q=0;q<$;q++)for(let N=0;N<$;N++){const ae=a[q][N]/255;r.push(N/c*2-1,(1-q/c)*2-1,ae)}const y=(2**h)**2;let f=[],u=0;const i=$;let g=0,Y=0;for(;u<y;){const q=g+Y*i,N=q+0,ae=q+1,he=q+i+0,se=q+i+1;f.push(he,se,N,se,ae,N),u++,g++,g===c&&(g=0,Y++)}A=f.length,n.bindVertexArray(G),n.bindBuffer(n.ARRAY_BUFFER,C),n.bufferData(n.ARRAY_BUFFER,new Float32Array(r),n.STATIC_DRAW),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,V),n.bufferData(n.ELEMENT_ARRAY_BUFFER,new Int32Array(f),n.STATIC_DRAW),n.enableVertexAttribArray(E),n.vertexAttribPointer(E,2,n.FLOAT,!1,3*x,0),n.enableVertexAttribArray(w),n.vertexAttribPointer(w,1,n.FLOAT,!1,3*x,2*x),_()}const l=Se(T,200);function _(){n.viewport(0,0,s,v),n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT),n.useProgram(M),n.bindVertexArray(G),n.drawElements(n.TRIANGLES,A,n.UNSIGNED_INT,0)}function z(a){h=a,o(1,h)}function W(a){S=a,o(2,S)}function ne(a){oe[a?"unshift":"push"](()=>{e=a,o(0,e)})}return[e,h,S,T,l,z,W,ne]}class Ne extends me{constructor(t){super(),pe(this,t,Ie,Fe,de,{})}}function Ve(m){let t;return{c(){t=R("Diamond Square")},l(o){t=D(o,"Diamond Square")},m(o,e){U(o,t,e)},d(o){o&&d(t)}}}function Me(m){let t;return{c(){t=R("Wikipedia")},l(o){t=D(o,"Wikipedia")},m(o,e){U(o,t,e)},d(o){o&&d(t)}}}function xe(m){let t,o,e,n,s,v,b,h,S,$,E,w,G,C,V,M,A,x,P,O,B,I,T;return t=new we({props:{timestamp:1652500800,$$slots:{default:[Ve]},$$scope:{ctx:m}}}),s=new ge({props:{href:"https://en.wikipedia.org/wiki/Diamond-square_algorithm",$$slots:{default:[Me]},$$scope:{ctx:m}}}),I=new Ne({}),{c(){j(t.$$.fragment),o=H(),e=F("p"),n=R("From "),j(s.$$.fragment),v=R(":"),b=H(),h=F("blockquote"),S=F("p"),$=F("strong"),E=R("The diamond step"),w=R(`: For each square in the array,
				set the midpoint of that square to be the average of the four
				corner points plus a random value.`),G=H(),C=F("p"),V=F("strong"),M=R("The square step"),A=R(`: For each diamond in the array,
				set the midpoint of that diamond to be the average of the four
				corner points plus a random value.`),x=H(),P=F("p"),O=R(`Depth is how many times the space is subdivided and variation
			controls how much a random value can fluctuate.`),B=H(),j(I.$$.fragment),this.h()},l(l){Q(t.$$.fragment,l),o=J(l),e=k(l,"P",{});var _=L(e);n=D(_,"From "),Q(s.$$.fragment,_),v=D(_,":"),_.forEach(d),b=J(l),h=k(l,"BLOCKQUOTE",{cite:!0});var z=L(h);S=k(z,"P",{});var W=L(S);$=k(W,"STRONG",{});var ne=L($);E=D(ne,"The diamond step"),ne.forEach(d),w=D(W,`: For each square in the array,
				set the midpoint of that square to be the average of the four
				corner points plus a random value.`),W.forEach(d),G=J(z),C=k(z,"P",{});var a=L(C);V=k(a,"STRONG",{});var r=L(V);M=D(r,"The square step"),r.forEach(d),A=D(a,`: For each diamond in the array,
				set the midpoint of that diamond to be the average of the four
				corner points plus a random value.`),a.forEach(d),z.forEach(d),x=J(l),P=k(l,"P",{});var c=L(P);O=D(c,`Depth is how many times the space is subdivided and variation
			controls how much a random value can fluctuate.`),c.forEach(d),B=J(l),Q(I.$$.fragment,l),this.h()},h(){K(h,"cite","https://en.wikipedia.org/wiki/Diamond-square_algorithm")},m(l,_){X(t,l,_),U(l,o,_),U(l,e,_),p(e,n),X(s,e,null),p(e,v),U(l,b,_),U(l,h,_),p(h,S),p(S,$),p($,E),p(S,w),p(h,G),p(h,C),p(C,V),p(V,M),p(C,A),U(l,x,_),U(l,P,_),p(P,O),U(l,B,_),X(I,l,_),T=!0},p(l,_){const z={};_&1&&(z.$$scope={dirty:_,ctx:l}),t.$set(z);const W={};_&1&&(W.$$scope={dirty:_,ctx:l}),s.$set(W)},i(l){T||(Z(t.$$.fragment,l),Z(s.$$.fragment,l),Z(I.$$.fragment,l),T=!0)},o(l){ee(t.$$.fragment,l),ee(s.$$.fragment,l),ee(I.$$.fragment,l),T=!1},d(l){te(t,l),l&&d(o),l&&d(e),te(s),l&&d(b),l&&d(h),l&&d(x),l&&d(P),l&&d(B),te(I,l)}}}function Pe(m){let t,o;return t=new Ee({props:{$$slots:{default:[xe]},$$scope:{ctx:m}}}),{c(){j(t.$$.fragment)},l(e){Q(t.$$.fragment,e)},m(e,n){X(t,e,n),o=!0},p(e,n){const s={};n&1&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){o||(Z(t.$$.fragment,e),o=!0)},o(e){ee(t.$$.fragment,e),o=!1},d(e){te(t,e)}}}function Oe(m){let t,o,e,n;return t=new Ae({props:{title:"Diamond Square",description:"Generate noise-like patterns using diamond square algorithm",keywords:"Noise, Javascript, Creative Coding, Algorithm, Diamond Square"}}),e=new be({props:{$$slots:{default:[Pe]},$$scope:{ctx:m}}}),{c(){j(t.$$.fragment),o=H(),j(e.$$.fragment)},l(s){Q(t.$$.fragment,s),o=J(s),Q(e.$$.fragment,s)},m(s,v){X(t,s,v),U(s,o,v),X(e,s,v),n=!0},p(s,[v]){const b={};v&1&&(b.$$scope={dirty:v,ctx:s}),e.$set(b)},i(s){n||(Z(t.$$.fragment,s),Z(e.$$.fragment,s),n=!0)},o(s){ee(t.$$.fragment,s),ee(e.$$.fragment,s),n=!1},d(s){te(t,s),s&&d(o),te(e,s)}}}class Qe extends me{constructor(t){super(),pe(this,t,null,Oe,de,{})}}export{Qe as default};
